<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>API Tester</title>
        <style>
        *,::after,::before {
            box-sizing: border-box;
        }
        body {
            background-color: #e5e7eb;
            font-family: Arial, sans-serif;
            margin: 0 auto;
        }
        /* Header */
        .header {
            background-color: #1e40af;
            color: white;
            padding: 16px;
        }
        .header h1 {
            font-size: 1.25rem;
            font-weight: bold;
        }
        /* Layout */
        .wrapper {
            display: flex;
            justify-content: space-between;
        }
        /* Sidebar */
        .sidebar {
            width: 20%;
            background-color: #1f2937;
            color: white;
            height: 100vh;
            max-height: 100vh;
            overflow-y: auto;
            padding: 16px;
            position: -webkit-sticky;
            position: sticky;
            top: 0;
        }
        .sidebar h2 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 16px;
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar li {
            background-color: #374151;
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
        }
        .sidebar a {
            color: inherit;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .sidebar a span:first-child {
            background-color: #10b981;
            padding: 4px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-right: 8px;
        }
        /* Main Content */
        .main {
            flex: 1;
            background-color: white;
            padding: 24px;
            max-width: 80%;
            min-height: 100vh;
        }
        .card {
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .layout-for-headers-and-body {
            display: flex;
        }
        .layout-for-headers, .layout-for-query, .layout-for-json-body {
            width: 50%;
        }
        .resizer {
            padding: 0 40px;
        }
        h2 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .flex-row {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        .flex-row input, .flex-row select {
            border: 1px solid #d1d5db;
            padding: 8px;
            border-radius: 8px;
        }
        button{
            padding: 5px 16px;
            border-radius: 8px;
            cursor: pointer;
        }

        .button-send {
            position: relative;
            padding: 8px 16px;
            background: #1e40af;
            border: none;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }
        .button-send:hover{
            background: #3b82f6;
        }
        .button-send:active {
            background: #1e40af;
        }

        .button__text {
        font: bold 20px "Quicksand", san-serif;
        color: #ffffff;
        transition: all 0.2s;
        }
        .button:hover {
            background-color: #2563eb;
        }
        .button--loading .button__text {
            visibility: hidden;
            opacity: 0;
        }
        .button--loading::after {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            border: 4px solid transparent;
            border-top-color: #ffffff;
            border-radius: 50%;
            animation: button-loading-spinner 1s ease infinite;
        }
        @keyframes button-loading-spinner {
            from {
                transform: rotate(0turn);
            }

            to {
                transform: rotate(1turn);
            }
        }

        .remove-btn{
            padding: .25rem .5rem;
            font-size: .875rem;
            line-height: 1.5;
            border-radius: .2rem;
            color: #fff;
            background-color: #dc3545;
            border-color: #dc3545;
        }
        
        .border-top {
            border-top: 1px solid #d1d5db;
            padding-top: 16px;
        }

        textarea {
            display: block;
            width: 100%;
            height: auto;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #495057;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: .25rem;
            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }
        .d-flex {
            display: flex;
        }
        .w-50{
            width: 50%;
        }
        .w-100{
            width: 100%;
        }
        .mt-20{
            margin-top: 20px;
        }
        .bg-gray {
            background-color: #e5e7eb;
        }
        .bg-green {
            background-color: #10b981;
        }
        .bg-blue {
            background-color: #3b82f6;
        }
        .bg-dark {
            background-color: #374151;
        }
        .success {
            background-color: #6ee7b7;
            color: white;
            padding: 8px;
            border-radius: 8px;
        }
        .error {
            background-color: #dc3545;
            color: white;
            padding: 8px;
            border-radius: 8px;
        }
        pre {
            background-color: #111827;
            color: white;
            padding: 16px;
            margin-top: 16px;
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
            border-collapse: collapse;
            border: 1px solid #dee2e6;
        }
        .table td, .table th {
            padding: .75rem;
            vertical-align: top;
            border-top: 1px solid #dee2e6;
        }
        .table-bordered td, .table-bordered th {
            border: 1px solid #dee2e6;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(0, 0, 0, .05);
        }
        </style>
    </head>
    <body>

        <div class="header">
            <h1>API Tester</h1>
        </div>
        <div class="wrapper">
            <aside class="sidebar" id="history">
                <div class="aside-content">
                <h2>History <small id="clearHistory"></small></h2>
                <ul id="historyList"></ul>
                </div>
            </aside>
            <main class="main">
                <div class="card">
                <h2>API Request</h2>
                <div class="flex-row">
                    <select id="method">
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                    <input type="text" id="url" class="w-100" placeholder="Ex: https://api.example.com" required />
                </div>
                <div class="d-flex border-top mt-20">
                    <div class="layout-for-headers">
                        <h3>Headers</h3>
                        <div id="headers">
                            <div class="header-row flex-row">
                            <input type="text" class="w-50" value="Accept" placeholder="Header Name">
                            <input type="text" class="w-50" value="application/json" placeholder="Header Value">
                            <button class="remove-btn">Delete</button>
                            </div>
                        </div>
                        <button type="button" onclick="addHeaderParams()">Add Header</button>
                    </div>
                    <div class="resizer"></div>
                    <div class="layout-for-query">
                        <h3>Query Parameters</h3>
                        <div id="queryParams">
                            <div class="query-param-row flex-row">
                            <input type="text" class="w-50" placeholder="Parameter Name">
                            <input type="text" class="w-50" placeholder="Parameter Value">
                            <button class="remove-btn">Delete</button>
                            </div>
                        </div>
                        <button type="button" onclick="addQueryParams()">Add Query Parameter</button>
                    </div>
                </div>
                <div class="d-flex border-top mt-20">
                    <div class="layout-for-json-body">
                        <h3>JSON Body (for POST/PUT): <button type="button" class="bg-green" onclick="genarateJson()">Genarate Json</button> </h3>
                        <div id="jsonFormParams">
                            <div class="json-form-row flex-row">
                            <input type="text" class="w-50" placeholder="Key">
                            <input type="text" class="w-50" placeholder="Value">
                            <button class="remove-btn">Delete</button>
                            </div>
                        </div>
                        <button type="button" onclick="addJsonForm()">Add Form Parameter</button>
                    </div>
                    <div class="resizer"></div>
                    <div class="layout-for-json-body">   
                        <textarea id="jsonInput" class="w-100" rows="5" placeholder='{"key": "value"}'></textarea>
                    </div>
                </div>
                <div class="bg-gray border-top mt-20" style="padding: 20px;">
                        <button class="button-send w-100" id="btnSend" onclick="sendRequest()"><span class="button__text">Send request</span></button>
                    </div>
                </div>
                <!-- Response -->
                <div id="responseArea" style="display: none;">
                    <div class="card bg-gray" id="response">
                        <h2>Response</h2>
                        <div class="response-box" id="responseStatus"></div>
                        <pre id="responseHeaders"></pre>
                        <pre id="responseBody"> </pre>
                    </div>
                    <div class="card bg-gray response-table" >
                        <div id="responseTable"></div>
                    </div>
                </div>
            </main>
        </div>
        <script>
            let db;
            let sampleJson;
            function initDB() {
                let request = indexedDB.open("RequestHistoryDB", 1);
            
                request.onerror = function(event) {
                    console.error("Database error: " + event.target.errorCode);
                };
            
                request.onsuccess = function(event) {
                    db = event.target.result;
                    loadRequestHistory();
                };
            
                request.onupgradeneeded = function(event) {
                    db = event.target.result;
                    let objectStore = db.createObjectStore("requests", {
                        keyPath: "id",
                        autoIncrement: true
                    });
                    objectStore.createIndex("url", "url", {
                        unique: false
                    });
                    objectStore.createIndex("method", "method", {
                        unique: false
                    });
                    objectStore.createIndex("timestamp", "timestamp", {
                        unique: false
                    });
                };
            }
            
            function saveRequestData(requestData) {
                let transaction = db.transaction(["requests"], "readwrite");
                let objectStore = transaction.objectStore("requests");
                objectStore.add(requestData);
            }
            
            function loadRequestHistory() {
                let transaction = db.transaction(["requests"], "readonly");
                let objectStore = transaction.objectStore("requests");
                let lastEntry = null;
                objectStore.openCursor().onsuccess = function(event) {
                    let cursor = event.target.result;
                    if (cursor) {
                        lastEntry = cursor.value;
                        appendHistoryItem(cursor.value);
                        cursor.continue();
                    }else{
                        if (lastEntry) {
                            loadInputData(lastEntry);
                        }
                    }
                };
            }
            
            function appendHistoryItem(requestData) {
                const clearHistory = document.getElementById('clearHistory');
                if (clearHistory.children.length == 0) {
                    const clearBtn = '<button onclick="clearRequestHistory()">Clear History</button>';
                    clearHistory.innerHTML = clearBtn;
                }
            
                const historyList = document.getElementById('historyList');
                const li = document.createElement('li');
                const date = new Date(requestData.timestamp);
                li.innerHTML = ` <small>(${date.toLocaleString()})</small><a class="d-flex"><span>${requestData.method}</span><span>${requestData.url}</span> </a>`;
            
                li.addEventListener('click', () => {
                    loadInputData(requestData)
                });
                historyList.insertBefore(li, historyList.firstChild);
            }
            
            function loadInputData(requestData) {
                if (requestData) {
                    document.getElementById('url').value = requestData.url;
                    document.getElementById('method').value = requestData.method;
            
                    // Load query parameters
                    const queryParamsDiv = document.getElementById('queryParams');
                    queryParamsDiv.innerHTML = '';
                    requestData.queryParams.forEach(param => {
                        const queryParamRow = document.createElement('div');
                        queryParamRow.className = 'query-param-row flex-row';
            
                        const paramNameInput = document.createElement('input');
                        paramNameInput.type = 'text';
                        paramNameInput.className = 'w-50';
                        paramNameInput.placeholder = 'Parameter Name';
                        paramNameInput.value = param.name;
            
                        const paramValueInput = document.createElement('input');
                        paramValueInput.type = 'text';
                        paramValueInput.className = 'w-50';
                        paramValueInput.placeholder = 'Parameter Value';
                        paramValueInput.value = param.value;
            
                        const removeButton = document.createElement('button');
                        removeButton.textContent = 'Delete';
                        removeButton.className = 'remove-btn';
                        removeButton.onclick = function() {
                            queryParamsDiv.removeChild(queryParamRow);
                        };
            
                        queryParamRow.appendChild(paramNameInput);
                        queryParamRow.appendChild(paramValueInput);
                        queryParamRow.appendChild(removeButton);
                        queryParamsDiv.appendChild(queryParamRow);
                    });
            
                    // Load headers
                    const headersDiv = document.getElementById('headers');
                    headersDiv.innerHTML ='';
                    requestData.headers.forEach(header => {
                        const headerRow = document.createElement('div');
                        headerRow.className = 'header-row flex-row';
            
                        const headerNameInput = document.createElement('input');
                        headerNameInput.type = 'text';
                        headerNameInput.className = 'w-50';
                        headerNameInput.placeholder = 'Header Name';
                        headerNameInput.value = header.name;
            
                        const headerValueInput = document.createElement('input');
                        headerValueInput.type = 'text';
                        headerValueInput.className = 'w-50';
                        headerValueInput.placeholder = 'Header Value';
                        headerValueInput.value = header.value;
            
                        const removeButton = document.createElement('button');
                        removeButton.textContent = 'Delete';
                        removeButton.className = 'remove-btn';
                        removeButton.onclick = function() {
                            headersDiv.removeChild(headerRow);
                        };
            
                        headerRow.appendChild(headerNameInput);
                        headerRow.appendChild(headerValueInput);
                        headerRow.appendChild(removeButton);
                        headersDiv.appendChild(headerRow);
                    });
            
                    // Load JSON body
                    document.getElementById('jsonInput').value = requestData.jsonInput;
                    if (requestData.jsonInput) {
                        const jsonInput = JSON.parse(requestData.jsonInput);
                        const jsonFormDiv = document.getElementById('jsonFormParams');
                        jsonFormDiv.innerHTML = '';
                        for (var key in jsonInput) {
                            const jsonFormRow = document.createElement('div');
                            jsonFormRow.className = 'json-form-row flex-row';
            
                            const jsonKeyInput = document.createElement('input');
                            jsonKeyInput.type = 'text';
                            jsonKeyInput.className = 'w-50';
                            jsonKeyInput.placeholder = 'Key';
                            jsonKeyInput.value = key;
            
                            const jsonValueInput = document.createElement('input');
                            jsonValueInput.type = 'text';
                            jsonValueInput.className = 'w-50';
                            jsonValueInput.placeholder = 'Value';
                            jsonValueInput.value = jsonInput[key];
            
            
                            const removeButton = document.createElement('button');
                            removeButton.textContent = 'Delete';
                            removeButton.className = 'remove-btn';
                            removeButton.onclick = function() {
                                jsonFormDiv.removeChild(jsonFormRow);
                            };
            
                            jsonFormRow.appendChild(jsonKeyInput);
                            jsonFormRow.appendChild(jsonValueInput);
                            jsonFormRow.appendChild(removeButton);
                            jsonFormDiv.appendChild(jsonFormRow);
                        }
                    }
            
                }
            }
            
            function clearRequestHistory() {
                const transaction = db.transaction(['requests'], 'readwrite');
                const objectStore = transaction.objectStore('requests');
                const request = objectStore.clear();
            
                request.onsuccess = function(event) {
                    console.log('Request history cleared successfully.');
                    const historyList = document.getElementById('historyList');
                    historyList.innerHTML = '';
                };
            
                request.onerror = function(event) {
                    console.error('Error clearing request history:', event.target.errorCode);
                };
            }
            
            function addQueryParams() {
                const queryParamsDiv = document.getElementById('queryParams');
                const queryParamRow = document.createElement('div');
                queryParamRow.className = 'query-param-row flex-row';
            
                const paramNameInput = document.createElement('input');
                paramNameInput.type = 'text';
                paramNameInput.className = 'w-50';
                paramNameInput.placeholder = 'Parameter Name';
            
                const paramValueInput = document.createElement('input');
                paramValueInput.type = 'text';
                paramValueInput.className = 'w-50';
                paramValueInput.placeholder = 'Parameter Value';
            
                const removeButton = document.createElement('button');
                removeButton.textContent = 'Delete';
                removeButton.className = 'remove-btn';
                removeButton.onclick = function() {
                    queryParamsDiv.removeChild(queryParamRow);
                };
            
                queryParamRow.appendChild(paramNameInput);
                queryParamRow.appendChild(paramValueInput);
                queryParamRow.appendChild(removeButton);
                queryParamsDiv.appendChild(queryParamRow);
            }
            
            function addJsonForm() {
                const jsonFormDiv = document.getElementById('jsonFormParams');
                const jsonFormRow = document.createElement('div');
                jsonFormRow.className = 'json-form-row flex-row';
            
                const jsonKeyInput = document.createElement('input');
                jsonKeyInput.type = 'text';
                jsonKeyInput.className = 'w-50';
                jsonKeyInput.placeholder = 'Key';
            
                const jsonValueInput = document.createElement('input');
                jsonValueInput.type = 'text';
                jsonValueInput.className = 'w-50';
                jsonValueInput.placeholder = 'Value';
            
                const removeButton = document.createElement('button');
                removeButton.textContent = 'Delete';
                removeButton.className = 'remove-btn';
                removeButton.onclick = function() {
                    jsonFormDiv.removeChild(jsonFormRow);
                };
            
                jsonFormRow.appendChild(jsonKeyInput);
                jsonFormRow.appendChild(jsonValueInput);
                jsonFormRow.appendChild(removeButton);
                jsonFormDiv.appendChild(jsonFormRow);
            }
            
            function genarateJson(){
                let jsonInput = '{'; 
                    const keyValueRows = document.querySelectorAll('.json-form-row');
                    const jsonObject = {};
            
                    keyValueRows.forEach(row => {
                        let key = row.children[0].value;
                        let value = row.children[1].value;
                        if (key) {
                            jsonObject[key] = value;
                        }
                    });
            
                    document.getElementById('jsonInput').value = JSON.stringify(jsonObject, null, 2);
            }
            
            function addHeaderParams() {
                const headersDiv = document.getElementById('headers');
                const headerRow = document.createElement('div');
                headerRow.className = 'header-row flex-row';
            
                const headerNameInput = document.createElement('input');
                headerNameInput.type = 'text';
                headerNameInput.className = 'w-50';
                headerNameInput.placeholder = 'Header Name';
            
                const headerValueInput = document.createElement('input');
                headerValueInput.type = 'text';
                headerValueInput.className = 'w-50';
                headerValueInput.placeholder = 'Header Value';
            
                const removeButton = document.createElement('button');
                removeButton.textContent = 'Delete';
                removeButton.className = 'remove-btn';
                removeButton.onclick = function() {
                    headersDiv.removeChild(headerRow);
                };
            
                headerRow.appendChild(headerNameInput);
                headerRow.appendChild(headerValueInput);
                headerRow.appendChild(removeButton);
                headersDiv.appendChild(headerRow);
            }
            
            function createResponseTable(responseBody) {
                const responseTableDiv = document.getElementById('responseTable');
            
                // Ensure responseBody is an object or array
                if (typeof responseBody === 'object' && responseBody !== null) {
                    const table = document.createElement('table');
                    table.className = 'table table-striped table-bordered';
                    const tbody = document.createElement('tbody');
            
                    // Handle array of objects
                    if (Array.isArray(responseBody)) {
                        responseBody.forEach((item, index) => {
                            if (typeof item === 'object' && item !== null) {
                                const rowHeader = document.createElement('tr');
                                const headerCell = document.createElement('th');
                                headerCell.setAttribute('colspan', '2');
                                headerCell.textContent = `Item ${index + 1}`;
                                rowHeader.appendChild(headerCell);
                                tbody.appendChild(rowHeader);
            
                                Object.keys(item).forEach(key => {
                                    const row = document.createElement('tr');
                                    
                                    const cellName = document.createElement('td');
                                    if (typeof sampleJson === 'object' && sampleJson !== null) {
                                        if (sampleJson.hasOwnProperty(key)) {
                                            cellName.textContent = sampleJson[key];
                                        }
                                    }
                                    row.appendChild(cellName);
            
                                    const keyCell = document.createElement('td');
                                    keyCell.textContent = key;
                                    row.appendChild(keyCell);
            
                                    const valueCell = document.createElement('td');
                                    const value = item[key];
                                    valueCell.textContent = (typeof value === 'object' && value !== null) ? JSON.stringify(value, null, 2) : value;
                                    row.appendChild(valueCell);
            
                                    tbody.appendChild(row);
                                });
                            }
                        });
                    } else {
                        // Handle single object
                        Object.keys(responseBody).forEach(key => {
                            const row = document.createElement('tr');
            
                            const cellName = document.createElement('td');
                            if (typeof sampleJson === 'object' && sampleJson !== null) {
                                if (sampleJson.hasOwnProperty(key)) {
                                    cellName.textContent = sampleJson[key];
                                }
                            }
                            row.appendChild(cellName);
            
                            const keyCell = document.createElement('td');
                            keyCell.textContent = key;
                            row.appendChild(keyCell);
            
                            const valueCell = document.createElement('td');
                            const value = responseBody[key];
                            valueCell.textContent = (typeof value === 'object' && value !== null) ? JSON.stringify(value, null, 2) : value;
                            row.appendChild(valueCell);
            
                            tbody.appendChild(row);
                        });
                    }
            
                    table.appendChild(tbody);
                    responseTableDiv.appendChild(table);
                } else {
                    responseTableDiv.innerText = 'Response is not a valid JSON object or array.';
                }
            }
            
            async function sendRequest() {
                let url = document.getElementById('url').value;
                if (url != '') {
                    const method = document.getElementById('method').value;
                    const jsonInput = document.getElementById('jsonInput').value;
                    const responseArea = document.getElementById('responseArea');
                    const responseStatus = document.getElementById('responseStatus');
                    const responseHeadersDiv = document.getElementById('responseHeaders');
                    const responseBodyDiv = document.getElementById('responseBody');
                    const btnSend = document.getElementById('btnSend');


                    responseArea.style="display:none";
                    btnSend.classList.add("button--loading");
            
                    // Clear previous response
                    responseHeadersDiv.innerHTML = '';
                    responseBodyDiv.innerHTML = '';
            
                    // Get all query parameters
                    const queryParams = [];
                    const queryParamRows = document.querySelectorAll('.query-param-row');
                    queryParamRows.forEach(row => {
                        const name = row.children[0].value;
                        const value = row.children[1].value;
                        if (name) {
                            queryParams.push(`${encodeURIComponent(name)}=${encodeURIComponent(value)}`);
                        }
                    });
            
                    if (queryParams.length > 0) {
                        url += '?' + queryParams.join('&');
                    }
            
                    // Get all headers
                    const headers = {};
                    const headerRows = document.querySelectorAll('.header-row');
                    headerRows.forEach(row => {
                        const name = row.children[0].value;
                        const value = row.children[1].value;
                        if (name && value) {
                            headers[name] = value;
                        }
                    });
            
                    // Save request data to local storage
                    const requestData = {
                        url: document.getElementById('url').value,
                        method: method,
                        queryParams: Array.from(queryParamRows).map(row => ({
                            name: row.children[0].value,
                            value: row.children[1].value
                        })),
                        headers: Array.from(headerRows).map(row => ({
                            name: row.children[0].value,
                            value: row.children[1].value
                        })),
                        jsonInput: jsonInput,
                        timestamp: Date.now()
                    };
            
                    try {
                        const response = await fetch(url, {
                            method: method,
                            headers: {
                                ...headers
                            },
                            body: method !== 'GET' ? jsonInput : null
                        });

                        responseArea.style="display:block";
                        btnSend.classList.remove("button--loading");

                        const status = response.status;
                        responseStatus.innerHTML = '<h3>' + status + '</h3>';
                        if (status !== 200) {
                            responseStatus.className = 'error'
                        } else {
                            responseStatus.className = 'success'
                        }
                        // Display response headers
                        const responseHeaders = [...response.headers];
                        responseHeaders.forEach(header => {
                            const headerElement = document.createElement('div');
                            headerElement.textContent = `${header[0]}: ${header[1]}`;
                            responseHeadersDiv.appendChild(headerElement);
                        });
            
                        // Display full request headers (optional)
                        responseHeadersDiv.appendChild(document.createElement('hr'));
                        const requestHeaders = headers;
                        Object.keys(requestHeaders).forEach(header => {
                            const headerElement = document.createElement('div');
                            headerElement.textContent = `${header}: ${requestHeaders[header]}`;
                            responseHeadersDiv.appendChild(headerElement);
                        });
            
                        // Display response body
                        const contentType = response.headers.get("content-type");
                        if (contentType && contentType.includes("application/json")) {
                            const responseData = await response.json();
                            responseBodyDiv.innerText = JSON.stringify(responseData, null, 2);
                            createResponseTable(responseData);
                        } else {
                            const responseData = await response.text();
                            responseBodyDiv.innerText = responseData;
                            createResponseTable(responseData);
                        }
            
                    } catch (error) {
                        responseBodyDiv.innerText = `Error: ${error.message}`;
                    }
                    saveRequestData(requestData);

                    appendHistoryItem(requestData);
                }else{
                    alert("input api url");
                    document.getElementById('url').focus();
                }
            }
            
            document.addEventListener('DOMContentLoaded', function () {
                initDB(); 
            });
            
        </script>
    </body>
</html>